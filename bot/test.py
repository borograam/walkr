from api import FleetsApiAnswerSchema, LabAnswerSchema
import pytest


@pytest.mark.parametrize(
    'api_answer_example',
    (
        '{"success": true, "fleet": null, "now": 1667901025}',
        '{"success": true, "fleet": {"id": 8744947, "name": "Happy new year", "country_code": "KZ", "privacy": "private", "is_invitable": true, "members_count": 3, "players_count": 3, "members_max": 8, "members_min": 3, "weight": 76.0, "invited": false, "created_at": 1672545408, "started_at": 1672665797, "event_status": "event", "contribution_amount": 8125000, "energy": 0, "consumed_energy": 18000, "last_consumed_at": 1672665797, "value_a": 900000, "value_b": 1250, "value_c": 0, "badge_front": "http://cargoship.walkrgame.com/fleet_badges/front-2.png", "badge_back": "http://cargoship.walkrgame.com/fleet_badges/back-7.png", "epic": {"id": 15, "icon": "http://cargoship.walkrgame.com/uploads/epic/icon/15/e917195cbc67ffb49009.jpg", "cover": "http://cargoship.walkrgame.com/uploads/epic/cover/15/e917195cbc67ffb49009.jpg", "name": "A Bistro Showdown"}, "captain": {"name": "Nathalie Popova", "avatar": "https://toycar.fourdesire.com/uploads/user/avatar_file/1935777/b60cb8b447d220dd1c0b.jpg"}}, "event_status": "event", "event": {"id": 182, "epic_id": 15, "cover": {"url": "http://cargoship.walkrgame.com/uploads/epic_event/cover/182/5919019eb876bc7385ac.jpg"}, "event_type": "currency", "resource_a": 900000, "resource_b": 5000, "resource_c": null, "created_at": "2016-08-17 08:56:30", "updated_at": "2016-08-18 06:18:29", "attachment": null, "name": "An invitation from the desert bandits", "description": "Never expected to be respected by the desert bandits", "label_a": null, "label_b": null, "label_c": null}, "path": {"id": 163, "epic_event_id": 182, "target_id": 185, "time": 3, "required_energy": 18000, "created_at": "2016-08-17 09:36:50", "updated_at": "2016-08-17 09:36:50"}, "members": [{"id": 271306, "name": "Andrew Popov", "avatar": "https://toycar.fourdesire.com/uploads/user/avatar_file/1935781/e33fb437db767c09be7c.jpg", "level": 40, "planets_count": 100, "replicators_count": 41, "energy_productivity": 28980, "population": 1191, "spaceship": "flash-pink", "contribution": 3436756, "title": "member", "role": "sportsman", "rsvp": "ready"}, {"id": 2100453, "name": "Maria Subbotina", "avatar": "", "level": 27, "planets_count": 62, "replicators_count": 16, "energy_productivity": 678, "population": 599, "spaceship": "walkr-baby", "contribution": 2543893, "title": "member", "role": "banker", "rsvp": "ready"}, {"id": 1599163, "name": "Nathalie Popova", "avatar": "https://toycar.fourdesire.com/uploads/user/avatar_file/1935777/b60cb8b447d220dd1c0b.jpg", "level": 25, "planets_count": 67, "replicators_count": 26, "energy_productivity": 10328, "population": 721, "spaceship": "walkr-baby", "contribution": 2144351, "title": "captain", "role": "sportsman", "rsvp": "ready"}], "fleet_histories": [{"id": 167, "name": "Create a space fleet", "description": "A good beginning is half way to success", "cover": "http://cargoship.walkrgame.com/uploads/epic_event/cover/167/813efa26332f50d6344f.jpg", "event_type": "preparation", "attachment": null, "label_a": null, "label_b": null, "label_c": null, "value_a": 1000000, "value_b": 100000, "value_c": 0, "solved_at": 1672577413}, {"id": 178, "name": "Travel to Gold Rush Town on business", "description": "It has been a while since you have taken a journey", "cover": "http://cargoship.walkrgame.com/uploads/epic_event/cover/178/d3f19ba6978991e3b2ad.jpg", "event_type": "virtual-coins", "attachment": "https://s3-ap-northeast-1.amazonaws.com/spacewalk-server-production/fleet_avatars/sw-fleet-ticket@2x.png", "label_a": "Travel ticket", "label_b": null, "label_c": null, "value_a": 108, "value_b": 0, "value_c": 0, "solved_at": 1672592546}, {"id": 179, "name": "Encounter bandits in the middle of your journey", "description": "Counterattack or mount a resistance?", "cover": "http://cargoship.walkrgame.com/uploads/epic_event/cover/179/0a07869a530ad19adb9b.jpg", "event_type": "voting", "attachment": null, "label_a": "Bribe", "label_b": "Resist", "label_c": null, "value_a": 2, "value_b": 1, "value_c": 0, "solved_at": 1672607733}, {"id": 180, "name": "Settle the matter with money", "description": "Trivial problems can be resolved with money", "cover": "http://cargoship.walkrgame.com/uploads/epic_event/cover/180/d7b43c67b0ad0c10b56a.jpg", "event_type": "currency", "attachment": null, "label_a": null, "label_b": null, "label_c": null, "value_a": 1200000, "value_b": 0, "value_c": 0, "solved_at": 1672654157}], "hitpoints": {"value_a": 675000, "value_b": 0, "value_c": 0, "hitpoints": 1, "next_hitpoint_at": 1672674135, "next_hitpoint_countdown": 52}, "now": 1672674083}',
        '{"success":true,"fleet":{"id":8751634,"name":"Clower","country_code":"KZ","privacy":"private","is_invitable":true,"members_count":3,"players_count":3,"members_max":8,"members_min":3,"weight":77.0,"invited":false,"created_at":1672873965,"started_at":1673091868,"event_status":"path","contribution_amount":10160000,"energy":0,"consumed_energy":9000,"last_consumed_at":1673097446,"value_a":20000,"value_b":24000,"value_c":0,"badge_front":"http://cargoship.walkrgame.com/fleet_badges/front-5.png","badge_back":"http://cargoship.walkrgame.com/fleet_badges/back-19.png","epic":{"id":15,"icon":"http://cargoship.walkrgame.com/uploads/epic/icon/15/e917195cbc67ffb49009.jpg","cover":"http://cargoship.walkrgame.com/uploads/epic/cover/15/e917195cbc67ffb49009.jpg","name":"A Bistro Showdown"},"captain":{"name":"Nathalie Popova","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1935777/b60cb8b447d220dd1c0b.jpg"}},"event_status":"path","event":{"id":185,"epic_id":15,"cover":{"url":"http://cargoship.walkrgame.com/uploads/epic_event/cover/185/7034e0729ad93010e5f9.jpg"},"event_type":"resources","resource_a":20000,"resource_b":24000,"resource_c":null,"created_at":"2016-08-17 08:57:19","updated_at":"2016-08-18 06:20:09","attachment":null,"name":"A party to celebrate the successful theft of the world\'s treasures","description":"Let loose and have fun!","label_a":null,"label_b":null,"label_c":null},"path":{"id":165,"epic_event_id":185,"target_id":188,"time":3,"required_energy":18000,"created_at":"2016-08-17 09:37:19","updated_at":"2016-08-17 09:37:19"},"members":[{"id":271306,"name":"Andrew Popov","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1935781/f81f6e1e77e17a48f6c4.jpg","level":40,"planets_count":101,"replicators_count":41,"energy_productivity":15612,"population":1222,"spaceship":"flash-pink","contribution":3591520,"title":"member","role":"sportsman","rsvp":"ready"},{"id":2100453,"name":"Maria Subbotina","avatar":"","level":27,"planets_count":63,"replicators_count":16,"energy_productivity":1283,"population":605,"spaceship":"walkr-baby","contribution":3563480,"title":"member","role":"banker","rsvp":"ready"},{"id":1599163,"name":"Nathalie Popova","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1935777/b60cb8b447d220dd1c0b.jpg","level":25,"planets_count":68,"replicators_count":26,"energy_productivity":5011,"population":781,"spaceship":"walkr-baby","contribution":3005000,"title":"captain","role":"cook","rsvp":"ready"}],"fleet_histories":[{"id":167,"name":"Create a space fleet","description":"A good beginning is half way to success","cover":"http://cargoship.walkrgame.com/uploads/epic_event/cover/167/813efa26332f50d6344f.jpg","event_type":"preparation","attachment":null,"label_a":null,"label_b":null,"label_c":null,"value_a":1000000,"value_b":100000,"value_c":0,"solved_at":1672924785},{"id":178,"name":"Travel to Gold Rush Town on business","description":"It has been a while since you have taken a journey","cover":"http://cargoship.walkrgame.com/uploads/epic_event/cover/178/d3f19ba6978991e3b2ad.jpg","event_type":"virtual-coins","attachment":"https://s3-ap-northeast-1.amazonaws.com/spacewalk-server-production/fleet_avatars/sw-fleet-ticket@2x.png","label_a":"Travel ticket","label_b":null,"label_c":null,"value_a":108,"value_b":0,"value_c":0,"solved_at":1672936641},{"id":179,"name":"Encounter bandits in the middle of your journey","description":"Counterattack or mount a resistance?","cover":"http://cargoship.walkrgame.com/uploads/epic_event/cover/179/0a07869a530ad19adb9b.jpg","event_type":"voting","attachment":null,"label_a":"Bribe","label_b":"Resist","label_c":null,"value_a":2,"value_b":0,"value_c":0,"solved_at":1672955233},{"id":180,"name":"Settle the matter with money","description":"Trivial problems can be resolved with money","cover":"http://cargoship.walkrgame.com/uploads/epic_event/cover/180/d7b43c67b0ad0c10b56a.jpg","event_type":"currency","attachment":null,"label_a":null,"label_b":null,"label_c":null,"value_a":1200000,"value_b":0,"value_c":0,"solved_at":1673023984},{"id":182,"name":"An invitation from the desert bandits","description":"Never expected to be respected by the desert bandits","cover":"http://cargoship.walkrgame.com/uploads/epic_event/cover/182/5919019eb876bc7385ac.jpg","event_type":"currency","attachment":null,"label_a":null,"label_b":null,"label_c":null,"value_a":900000,"value_b":5000,"value_c":0,"solved_at":1673051366},{"id":185,"name":"A party to celebrate the successful theft of the world\'s treasures","description":"Let loose and have fun!","cover":"http://cargoship.walkrgame.com/uploads/epic_event/cover/185/7034e0729ad93010e5f9.jpg","event_type":"resources","attachment":null,"label_a":null,"label_b":null,"label_c":null,"value_a":20000,"value_b":24000,"value_c":0,"solved_at":1673091867}],"hitpoints":{"value_a":0,"value_b":0,"value_c":0,"hitpoints":3,"next_hitpoint_at":0,"next_hitpoint_countdown":null},"now":1673113822}',
    )
)
def test_fleets_api_answer_schema(api_answer_example):
    parsed = FleetsApiAnswerSchema().loads(api_answer_example)
    assert 1 == 1


@pytest.mark.parametrize(
    'api_answer_example',
    (
        '{"success":true,"lab":{"id":68334,"name":"Repulsed Walruses","description":"Resurrection","country_code":"RS","privacy":"public","tag":"#AB22WZZS7W","planet_limit":20,"score":6188,"badge_front":"http://cargoship.walkrgame.com/fleet_badges/front-5.png","badge_back":"http://cargoship.walkrgame.com/fleet_badges/back-7.png","members_count":13,"members_max":40,"leader":{"id":1599163,"name":"Nathalie Popova","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1935777/b60cb8b447d220dd1c0b.jpg"},"invited":false},"research":{"colony_type":"planet","identifier":"ebisushi","donation_type":"energy","donation_value":500,"max_donation_count":5,"level":2,"requirements":60000,"total_donation":0,"current_donation":0,"donated_counter":"","last_requested_at":0},"members":[{"id":271306,"name":"Andrew Popov","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1935781/f81f6e1e77e17a48f6c4.jpg","level":40,"planets_count":101,"replicators_count":41,"energy_productivity":13286,"population":1232,"spaceship":"flash-pink","score":5207000,"title":"vice","rsvp":"member"},{"id":2100453,"name":"Maria Subbotina","avatar":"","level":27,"planets_count":63,"replicators_count":16,"energy_productivity":1170,"population":605,"spaceship":"walkr-baby","score":4655500,"title":"member","rsvp":"member"},{"id":1599163,"name":"Nathalie Popova","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1935777/b60cb8b447d220dd1c0b.jpg","level":25,"planets_count":68,"replicators_count":26,"energy_productivity":5714,"population":794,"spaceship":"walkr-baby","score":3953500,"title":"leader","rsvp":"member"},{"id":2107982,"name":"kikky hiro","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1992680/6a011a68cb1937aefdc3.jpg","level":26,"planets_count":57,"replicators_count":13,"energy_productivity":15674,"population":733,"spaceship":"walkr-baby","score":3231500,"title":"member","rsvp":"member"},{"id":2101453,"name":"heteroxenia","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1953721/c1c7e8b6ca2a6ebd5a45.jpg","level":28,"planets_count":63,"replicators_count":28,"energy_productivity":2391,"population":672,"spaceship":"doggiiship","score":2566500,"title":"member","rsvp":"member"},{"id":2100707,"name":"Павел Киреев","avatar":"","level":35,"planets_count":60,"replicators_count":28,"energy_productivity":2661,"population":571,"spaceship":"walkr-baby","score":2013500,"title":"member","rsvp":"member"},{"id":2119046,"name":"Alex P","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/2050772/2599695690443add5a87.jpg","level":23,"planets_count":47,"replicators_count":20,"energy_productivity":11424,"population":543,"spaceship":"walkr-baby","score":1512000,"title":"member","rsvp":"member"},{"id":2100711,"name":"Мария Попова","avatar":"","level":17,"planets_count":58,"replicators_count":18,"energy_productivity":2682,"population":628,"spaceship":"walkr-baby","score":1450000,"title":"member","rsvp":"member"},{"id":2100723,"name":"Дарья Проскурина","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1949449/480daa57ed054b52805d.jpg","level":20,"planets_count":56,"replicators_count":21,"energy_productivity":1831,"population":455,"spaceship":"walkr-baby","score":1296000,"title":"member","rsvp":"member"},{"id":2116183,"name":"ler493","avatar":"","level":22,"planets_count":47,"replicators_count":14,"energy_productivity":11813,"population":282,"spaceship":"walkr-baby","score":1289500,"title":"member","rsvp":"member"},{"id":2100712,"name":"Александр Антропов","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1949385/c63881a26712190a552a.jpg","level":22,"planets_count":57,"replicators_count":23,"energy_productivity":4080,"population":519,"spaceship":"walkr-baby","score":1081000,"title":"member","rsvp":"member"},{"id":2120717,"name":"Максим Новиков","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/2051173/5aa6c485e4e438dc15e3.jpg","level":19,"planets_count":28,"replicators_count":19,"energy_productivity":3209,"population":173,"spaceship":"walkr-baby","score":160500,"title":"member","rsvp":"member"},{"id":2105758,"name":"Тимофей Горлов (Live Tim!)","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1980380/892abf77a5687917157f.jpg","level":12,"planets_count":24,"replicators_count":6,"energy_productivity":4826,"population":213,"spaceship":"walkr-baby","score":119000,"title":"member","rsvp":"member"},{"id":367181,"name":"Denisenko Denis","avatar":"https://graph.facebook.com/834089313328343/picture?type=square\u0026height=50\u0026width=50","level":16,"planets_count":45,"replicators_count":15,"energy_productivity":3235,"population":254,"spaceship":"doggiiship","score":0,"title":"newbie","rsvp":"waiting"},{"id":294710,"name":"Nikita Subbotin","avatar":"https://graph.facebook.com/100009518880573/picture?type=square\u0026height=50\u0026width=50","level":25,"planets_count":70,"replicators_count":26,"energy_productivity":7077,"population":661,"spaceship":"doggiiship","score":0,"title":"newbie","rsvp":"waiting"},{"id":441480,"name":"Вероника Никольская","avatar":"https://graph.facebook.com/447411578762155/picture?type=square\u0026height=50\u0026width=50","level":8,"planets_count":26,"replicators_count":9,"energy_productivity":677,"population":128,"spaceship":"walkr","score":0,"title":"newbie","rsvp":"waiting"},{"id":2101783,"name":"Daniel Kim","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/1955573/8ec6612a9c87daef5d38.jpg","level":35,"planets_count":66,"replicators_count":27,"energy_productivity":7764,"population":685,"spaceship":"flash-yellow","score":0,"title":"newbie","rsvp":"waiting"},{"id":2122044,"name":"Svetlana P","avatar":"https://toycar.fourdesire.com/uploads/user/avatar_file/2066171/960344a74e1804a8fc38.jpg","level":11,"planets_count":21,"replicators_count":7,"energy_productivity":1107,"population":98,"spaceship":"walkr-baby","score":0,"title":"newbie","rsvp":"waiting"}],"now":1673330770}',
    )
)
def test_lab_answer_schema(api_answer_example):
    parsed = LabAnswerSchema().loads(api_answer_example)
